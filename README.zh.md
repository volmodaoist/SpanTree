# TraceSpanTree é¡¹ç›®è¯´æ˜

å¼€å‘è€…ä»¬ï¼Œä½ ä»¬å¥½ï¼ğŸš€ æ˜¯å¦åŒå€¦äº†åœ¨é¡¹ç›®ä¸­å¤„ç†å¤æ‚çš„åµŒå¥—è¿½è¸ªæ•°æ®ï¼Ÿæœ‰æ—¶å€™JSONè½¬ä¸ºå­—å…¸ä¹‹åï¼Œéœ€è¦è¿ç»­å¥½å‡ ä¸ªæ‹¬å·æ‰èƒ½å–å‡ºå…¶ä¸­çš„valueï¼Œè€Œå½“ç ”å‘ä»£ç å˜åŠ¨ï¼Œå¯¼è‡´JSONç»“æ„å±‚çº§å…³ç³»å˜æ›´çš„æ—¶å€™ï¼Œè‡ªåŠ¨åŒ–ä»£ç åˆè¦å…¨éƒ¨ç»´æŠ¤ä¸€éï¼ç°åœ¨ï¼Œ**TraceSpanTree** æ¥å¸®æ‚¨è§£å†³éš¾é¢˜å•¦ï¼

å¿«é€Ÿå®‰è£…ï¼š

```shell
pip install -i https://test.pypi.org/simple/ TraceSpanTree==0.1.3
```

å¦‚æœè§‰å¾—ä¸é”™ï¼Œç»™æˆ‘ä»¬ç‚¹ä¸ª â­ æ”¶è—å§ï¼ ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç®€åŒ–è‡ªåŠ¨åŒ–ä»£ç ç¼–å†™ã€è°ƒç”¨é“¾è·¯åˆ†æä¸è¿½è¸ªçš„å·¥ä½œï¼


## ğŸ˜ ç®€ä»‹
**TraceSpanTree** æ˜¯ä¸€ä¸ª Python ä¸‰æ–¹åº“çš„ï¼Œæ—¨åœ¨ç®€åŒ–å¤„ç†å¤æ‚çš„åˆ†å±‚è¿½è¸ªæ•°æ®ã€‚åœ¨é¡¹ç›®æ‰§è¡Œï¼ˆæˆ–è€…è°ƒè¯•ï¼‰è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šæœ‰JSON æ ¼å¼å­˜å‚¨çš„è°ƒç”¨é“¾è·¯æ•°æ®ã€‚ç®¡ç†åµŒå¥—çš„é”®å€¼å¯¹å¹¶ç¼–å†™æ–­è¨€å¯èƒ½ä¼šå¾ˆç¹çï¼Œå°¤å…¶æ˜¯å½“æ•°æ®ç»“æ„é¢‘ç¹å˜åŒ–æ—¶ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§é«˜æ•ˆçš„æ–¹å¼æ¥ç®¡ç†è¿½è¸ªæ•°æ®ï¼Œé™ä½ä»£ç å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚ç°åœ¨ï¼Œå€ŸåŠ© **TraceSpanTree**ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åœ¨å¤šå±‚åµŒå¥—å­—å…¸å’Œè·¨åº¦ç»“æ„ä¸­æŸ¥æ‰¾ã€æ›´æ–°å’Œæ£€ç´¢é”®å€¼å¯¹ã€‚



## ğŸš€ åŠŸèƒ½æ¦‚è¿°

**TraceSpanTree** åº“åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

1. **`Log`**ï¼šç®€åŒ–çš„æ—¥å¿—å·¥å…·ï¼Œå¯é«˜æ•ˆè·Ÿè¸ªè¿½è¸ªæ“ä½œã€‚
2. **`MultiNestDict`**ï¼šæ”¯æŒåœ¨æ·±åº¦åµŒå¥—å­—å…¸ä¸­è½»æ¾æ£€ç´¢å’Œæ›´æ–°æ•°æ®ã€‚
3. **`SpanTree`**ï¼šä¾¿äºåœ¨å¤æ‚çš„è¿½è¸ªå±‚çº§ç»“æ„ä¸­æœç´¢å’Œæ£€ç´¢å€¼ã€‚
4. **`TraceGen`**ï¼šé€šè¿‡ `@tracer.trace_gen` è£…é¥°å™¨ä¸º `Tracer` å¯¹è±¡æä¾›åŠŸèƒ½ï¼Œä»¥æ ¹æ®å‡½æ•°è°ƒç”¨è‡ªåŠ¨ç”Ÿæˆè·¨åº¦æ ‘ã€‚



ğŸŒ³ è·¨åº¦æ ‘çš„æ¦‚å¿µ
å¯ä»¥å°†è¿½è¸ªæ•°æ®æƒ³è±¡æˆä¸€ç§æ ‘å½¢ç»“æ„ï¼Œå…¶ä¸­ï¼š
- æ¯ä¸ªèŠ‚ç‚¹ï¼ˆè·¨åº¦ï¼‰ä»£è¡¨æ¥è‡ªç‰¹å®šæœåŠ¡çš„æ“ä½œæ•°æ®ã€‚
- æ¯ä¸ªè·¨åº¦éƒ½å­˜å‚¨ä¸ºä¸€ä¸ª JSON å¯¹è±¡ï¼Œå…¶æœ¬èº«ä¹Ÿå¯è§†ä¸ºä¸€æ£µæ ‘ã€‚

æœ€ç»ˆå½¢æˆçš„æ˜¯ä¸€ç§ â€œæ ‘å¥—æ ‘â€ æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªæ ‘å¥—æ ‘ä¸Šé¢æœç´¢key-valueèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆåœ°æµè§ˆè¿½è¸ªæ•°æ®ã€‚é€šè¿‡åˆ©ç”¨è¿™ç§æ•°æ®ç»“æ„ï¼ŒTraceSpanTree æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œå¯å®šä½å’Œæ“ä½œä»»æ„å±‚çº§çš„æ•°æ®ã€‚


## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½å®ç°

SpanTree ä¸»è¦åŠŸèƒ½ç”±ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°å®ç°ï¼š

### è·¨è·¨åº¦çº¦æŸ

`_recursive_inter_search` å‡½æ•°æ—¨åœ¨å¸®åŠ©æ‚¨åœ¨è·¨åº¦æ ‘ä¸­å¯¼èˆªï¼š

- **å‡½æ•°æè¿°**ï¼šå®ƒåœ¨è·¨åº¦æ ‘ä¸­é€’å½’æœç´¢ `target_span_name`ã€‚`target_span_name` æ”¯æŒ â€œ.â€ çº¦æŸï¼Œå½“æ‚¨è¯•å›¾åœ¨å¤æ‚çš„æ ‘å½¢ç»“æ„ä¸­ç²¾ç¡®å®šä½ç‰¹å®šè·¨åº¦æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½éå¸¸å®ç”¨ã€‚ 

- **ç”¨æ³•è¯´æ˜**ï¼šå½“å±•å¼€æ•´ä¸ªè·¨åº¦é›†æ—¶ï¼Œä¼šå½¢æˆä¸€æ£µæ ‘ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨ä»æ ¹èŠ‚ç‚¹èµ°åˆ°å¶èŠ‚ç‚¹ï¼Œè·¨åº¦çš„åç§°å½¢æˆä¸€æ¡è·¯å¾„ï¼Œå¦‚ `'span1.span2.span3.span4.span5.span6'`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`target_span` å¯ä»¥æ˜¯è¿™æ¡è·¯å¾„çš„éè¿ç»­å­åºåˆ—ï¼Œä¾‹å¦‚ `'span_name1.span_name3.span_name5'`ã€‚é€šè¿‡ä½¿ç”¨æ­¤è·¯å¾„ï¼Œæ‚¨å¯ä»¥å®šä½ä¸ `span_name` å¯¹åº”çš„è·¨åº¦ã€‚æ­¤å¤–ï¼Œå¦‚æœè®¾ç½®äº† `is_type` å‚æ•°ï¼Œæœç´¢å°†ä½¿ç”¨è·¨åº¦ç±»å‹è€Œä¸æ˜¯åç§°è¿›è¡Œã€‚ 

### å†…éƒ¨è·¨åº¦çº¦æŸ

`_recursive_inner_search` å‡½æ•°ä¸“æ³¨äºåœ¨å•ä¸ªè·¨åº¦å†…è¿›è¡Œæ¢ç´¢ï¼š

- **å‡½æ•°æè¿°**ï¼šå®ƒåœ¨å•ä¸ªè·¨åº¦å†…é€’å½’æœç´¢ `target_key`ã€‚`target_key` åŒæ ·æ”¯æŒ â€œ.â€ çº¦æŸã€‚`idx` å‚æ•°å¯¹äº `List[Dict]` ç»“æ„å¾ˆæœ‰ç”¨ï¼Œå¯è®©æ‚¨ä»…é’ˆå¯¹ç¬¬ `idx` ä¸ª `Dict` å…ƒç´ å†…çš„å­—æ®µè¿›è¡Œæ“ä½œã€‚ 

- **ç”¨æ³•è¯´æ˜**ï¼šå½“æŸ¥çœ‹å•ä¸ªè·¨åº¦å†…éƒ¨æ—¶ï¼Œå®ƒä¹Ÿå½¢æˆä¸€ç§æ ‘çŠ¶ç»“æ„ã€‚å‡è®¾æ‚¨åœ¨è·¨åº¦å†…ä»æ ¹èŠ‚ç‚¹éå†åˆ°å¶èŠ‚ç‚¹ï¼Œé”®çš„åç§°å½¢æˆä¸€æ¡è·¯å¾„ï¼Œå¦‚ `'key1.key2.key3.key4.key5.key6'`ã€‚é‚£ä¹ˆï¼Œ`target_key` å¯ä»¥æ˜¯è¿™æ¡è·¯å¾„çš„éè¿ç»­å­åºåˆ—ï¼Œæ¯”å¦‚ `'key1. key3. key5'`ã€‚é€šè¿‡è¿™æ¡è·¯å¾„ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸ `key5` å¯¹åº”çš„ valueã€‚ 



##  ğŸ§° ç”¨æˆ·å…³é”®å‡½æ•°
###   `retrive` å‡½æ•°

æ­¤å‡½æ•°æ˜¯ SpanTree ä¸­ç”¨äºæ£€ç´¢ç‰¹å®šæ•°æ®çš„å…³é”®å·¥å…·ä¹‹ä¸€ã€‚å®ƒåˆ©ç”¨äº†è·¨è·¨åº¦å’Œå†…éƒ¨è·¨åº¦çº¦æŸï¼Œä½¿æ‚¨æ›´è½»æ¾åœ°è®¿é—®æ‰€éœ€çš„å€¼ã€‚ä¾‹å¦‚ï¼š

```python
res1 = spantree.retrive(target_span_name='root.father_span_1.leaf_span_1', 
                        target_field='data.message')
res2 = spantree.retrive(target_span_name='root.leaf_span_1', 
                        target_field='data.message')
res3 = spantree.retrive(target_span_name='root.leaf_span_1', 
                        target_field='message')
```

åªéœ€ç®€å•è°ƒç”¨æ­¤å‡½æ•°ï¼Œæ‚¨å°±å¯ä»¥é«˜æ•ˆåœ°åœ¨å¤æ‚çš„æ ‘å½¢ç»“æ„ä¸­å¯¼èˆªï¼Œå¹¶è·å–æ‰€éœ€çš„å€¼ã€‚æˆ‘ä»¬åŠ›æ±‚ä½¿å…¶å°½å¯èƒ½ç®€å•æ˜“ç”¨ï¼Œä½†ä¹ŸçŸ¥é“æ¯ä¸ªç”¨æˆ·çš„ç”¨ä¾‹å¯èƒ½ä¸åŒã€‚å¦‚æœæ‚¨é‡åˆ°ä»»ä½•å›°éš¾æˆ–æœ‰æ”¹è¿›çš„æƒ³æ³•ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚ 



### `batch_retrive` å‡½æ•°

å½“æ‚¨è¦ä» SpanTree ä¸åŒéƒ¨åˆ†æ£€ç´¢å¤šä¸ªå€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `batch_retrive` å‡½æ•°ã€‚é€šè¿‡é€‚å½“çš„è®¾ç½®è¿›è¡Œé…ç½®ï¼Œä¸€æ¬¡æ€§è·å–å„ç§æ•°æ®ã€‚è¿™åœ¨éœ€è¦åŒæ—¶éªŒè¯å¤šä¸ªæ–¹é¢çš„ç»¼åˆæµ‹è¯•åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨: 


## ç”¨æ³•ç¤ºä¾‹ ğŸ“

ä¸‹é¢é€šè¿‡ä¸€äº›ç¤ºä¾‹æ•°æ®ï¼Œæ›´è¯¦ç»†åœ°äº†è§£å¦‚ä½•ä½¿ç”¨ SpanTreeã€‚é¦–å…ˆï¼Œè€ƒè™‘ä»¥ä¸‹ä»¥ JSON æ ¼å¼è¡¨ç¤ºçš„ `spans` ç»“æ„ï¼š

```json
{
  "spans": [
    {
      "name": "root",
      "type": "root",
      "span_id": "1",
      "parent_id": "0",
      "state_code": 0,
      "data": {
        "message": "è¿™æ˜¯æ ¹è·¨åº¦ã€‚",
        "timestamp": "2024-01-01T00:00:00Z"
      }
    },
    {
      "name": "father_span_1",
      "type": "father",
      "span_id": "2",
      "parent_id": "1",
      "state_code": 0,
      "data": {
        "message": "è¿™æ˜¯æ ¹è·¨åº¦ä¸‹çš„å­è·¨åº¦ã€‚",
        "timestamp": "2024-01-01T00:00:10Z"
      }
    },
    {
      "name": "leaf_span_1",
      "type": "leaf",
      "span_id": "3",
      "parent_id": "2",
      "state_code": -1,
      "data": {
        "message": "è¿™æ˜¯ father_span_1 ä¸‹çš„å¶è·¨åº¦ã€‚",
        "timestamp": "2024-01-01T00:00:15Z"
      }
    },
    {
      "name": "father_span_2",
      "type": "father",
      "type": "father",
      "span_id": "5",
      "parent_id": "1",
      "state_code": 0,
      "data": {
        "message": "è¿™æ˜¯æ ¹è·¨åº¦ä¸‹çš„å­è·¨åº¦ã€‚",
        "timestamp": "2024-01-01T00:00:30Z"
      }
    },
    {
      "name": "leaf_span_2",
      "type": "leaf",
      "span_id": "6",
      "parent_id": "5",
      "state_code": -1,
      "data": {
        "message": "è¿™æ˜¯ father_span_2 ä¸‹çš„å¶è·¨åº¦ã€‚",
        "timestamp": "2024-01-01T00:00:35Z"
      }
    }
  ]
}
```

æ‚¨å¯ä»¥å¾ˆè½»æ¾åœ°åœ¨æ­¤æ•°æ®ä¸Šä½¿ç”¨ `retrive` å‡½æ•°ã€‚ä¾‹å¦‚ï¼š

```python
res1 = spantree.retrive(target_span_name='root.father_span_1.leaf_span_1', 
                        target_field='data.message')

res2 = spantree.retrive(target_span_name='root.leaf_span_1', 
                        target_field='data.message')


res3 = spantree.retrive(target_span_name='root.leaf_span_1',
                       target_field='message')

# åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œres1ã€res2ã€res3 çš„å€¼ç›¸åŒã€‚
```

ç°åœ¨ï¼Œè¿›ä¸€æ­¥æ‰©å±•æˆ‘ä»¬çš„ç¤ºä¾‹ã€‚è€ƒè™‘ä¸€ä¸ªæ›´å¤æ‚çš„ `spans` ç»“æ„ï¼š

```json
{
    "spans": [
        {
            "name": "root",
            "type": "root",
            "span_id": "1",
            "parent_id": "0",
            "state_code": 0,
            "input": {
                "param_str": "123",
                "param_int": 123
            },
            "output": [
                {
                    "result_key": "root_result_value, idx = 0",
                    "sub_result": [
                        {
                            "sub_key": "root_sub1_value, idx = 0"
                        }
                    ]
                },
                {
                    "result_key": "root_result_value, idx = 1",
                    "sub_result": [
                        {
                            "sub_key": "root_sub_value, idx = 1"
                        }
                    ]
                }
            ]
        },
        {
            "name": "father_span_1",
            "type": "father",
            "span_id": "2",
            "parent_id": "1",
            "state_code": 0,
            "input": {
                "param_str": "456",
                "param_int": 456
            },
            "output": [
                {
                    "result_key": "father_result_value",
                    "sub_result": [
                        {
                            "sub_key": "father_sub_value"
                        }
                    ]
                }
            ]
        },
        {
            "name": "leaf_span_1",
            "type": "leaf",
            "span_id": "3",
            "parent_id": "2",
            "state_code": -1,
            "input": {
                "param_str": "789",
                "param_int": 789
            },
            "output": [
                {
                    "result_key": "leaf1_result_value, idx = 0",
                    "sub_result": [
                        {
                            "sub_key": "leaf1_sub_value, idx = 0"
                        }
                    ]
                },
                {
                    "result_key": "leaf1_result_value, idx = 1"
                }
            ]
        },
        {
            "name": "father_span_2",
            "type": "father",
            "span_id": "4",
            "parent_id": "1",
            "state_code": 0,
            "input": {
                "param_str": "1011",
                "param_int": 1011
            },
            "output": [
                {
                    "result_key": "father2_result_value",
                    "sub_result": [
                        {
                            "sub_key": "father2_sub_value"
                        }
                    ]
                }
            ]
        },
        {
            "name": "leaf_span_2",
            "type": "leaf",
            "span_id": "5",
            "parent_id": "4",
            "state_code": -1,
            "input": {
                "param_str": "1213",
                "param_int": 1213
            },
            "output": [
                {
                    "result_key": "leaf2_result_value, idx = 0",
                    "sub_result": [
                        {
                            "sub_key": "leaf2_sub_value, idx = 0"
                        }
                    ]
                },
                {
                    "result_key": "leaf2_result_value, idx = 1"
                }
            ]
        }
    ]
}
```

ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ `batch_retrive` å‡½æ•°å¤„ç†æ›´å…¨é¢çš„æ•°æ®æå–ï¼š

```python
  configs = {
      "root": {
          "idx": None,
          "is_type": False,
          "target_fields": [
              ("input.param_str", "default_root_param_str", lambda x: x),
              ("input.param_int", "default_root_param_int", lambda x: x)
          ]
      },
      "father_span_1": {
          "idx": None,
          "is_type": False,
      "target_fields": [
              ("input.param_str", "default_father1_param_str", lambda x: x),
              ("input.param_int", "default_father1_param_int", lambda x: x)
          ]
      },
      "leaf_span_1": {
          "idx": 0,
          "is_type": False,
          "target_fields": [
              ("input.param_str", "default_leaf1_param_str", lambda x: x),
              ("input.param_int", "default_leaf1_param_int", lambda x: x),
              ("result_key", "default_result_key", lambda x: x)
          ]
      },
      "leaf_span_2": {
          "idx": 1,
          "is_type": False,
      "target_fields": [
              ("input.param_str", "default_leaf1_param_str", lambda x: x),
              ("input.param_int", "default_leaf1_param_int", lambda x: x),
              ("result_key", "default_result_key", lambda x: x)
          ]
      }
  }
  results = spantree.batch_retrive(configs)
```

å¯¹äº `batch_retrive` å‡½æ•°æ¥è¯´ï¼Œ`configs` æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é…ç½®å­—å…¸ã€‚

ä»¥ `configs` ä¸­çš„ä¸€ä¸ª `target_span_name`ï¼ˆä¾‹å¦‚ `"root"`ï¼‰ä¸ºä¾‹ï¼š
- `idx`ï¼ˆå¯é€‰ï¼‰ï¼šå¯¹äº `List[Dict]` æ•°æ®ï¼Œè®¾ç½®ä¸€ä¸ªå€¼å¯ä»…ä»ç¬¬ `idx` ä¸ªå…ƒç´ ä¸­æ£€ç´¢å­—æ®µã€‚å¦‚æœä¸º `None`ï¼Œåˆ™æ— ç´¢å¼•é™åˆ¶ã€‚
- `is_type`ï¼ˆå¯é€‰ï¼‰ï¼šé»˜è®¤å€¼ä¸º `False`ã€‚è®¾ç½®ä¸º `True` æ—¶ï¼Œå°†ä½¿ç”¨ `[span_name]` ä½œä¸º `[span_type]` æ¥åŒ¹é…ç›®æ ‡è·¨åº¦ã€‚
- `target_fields`ï¼ˆå¿…å¡«ï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªå…ƒç»„åˆ—è¡¨ï¼Œæ ¼å¼ä¸º `(target_field_name, default, callback)`ã€‚
  - `target_field_name`ï¼šè¦æ£€ç´¢çš„å­—æ®µåç§°ï¼Œä¾‹å¦‚ `"input.param_str"`ï¼ŒæŒ‡å®šå±‚çº§ç»“æ„ã€‚
  - `default`ï¼šå¦‚æœæœªæ‰¾åˆ°è¯¥å­—æ®µæ—¶çš„å›é€€å€¼ï¼Œéœ€ä¸å­—æ®µç±»å‹åŒ¹é…ã€‚
  - `callback`ï¼šä¸€ä¸ª lambda å‡½æ•°ï¼Œç”¨äºå¤„ç†æ£€ç´¢åˆ°çš„å­—æ®µå€¼ã€‚

è¿™æ ·ï¼Œæ— è®ºæ‚¨æ˜¯ä½¿ç”¨ç®€å•çš„ `retrive` å‡½æ•°å¿«é€Ÿè®¿é—®ç‰¹å®šå€¼ï¼Œè¿˜æ˜¯ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„ `batch_retrive` å‡½æ•°ä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªæ•°æ®æå–ï¼ŒSpanTree éƒ½æä¾›äº†ä¸€ç§ä¾¿æ·é«˜æ•ˆçš„æ–¹å¼æ¥ä¸åˆ†å±‚æ•°æ®è¿›è¡Œäº¤äº’ã€‚æˆ‘ä»¬å¸Œæœ›å®ƒèƒ½è®©æ‚¨çš„æµ‹è¯•å·¥ä½œæ›´é«˜æ•ˆã€æ›´å°‘å‡ºé”™ï¼Œä½†å¦‚æœæ‚¨è®¤ä¸ºæœ‰å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éšæ—¶æ¬¢è¿åé¦ˆã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬å…±åŒçš„ç›®æ ‡æ˜¯è®©æµ‹è¯•å·¥ä½œæµç¨‹æ›´é¡ºç•…ã€æ›´æœ‰æ•ˆï¼ ğŸ˜ƒ 






## ğŸ“‘ ç»“è®º 
SpanTree æ˜¯æˆ‘ä»¬ä¸ºè´¨é‡ä¿è¯å·¥ç¨‹å¸ˆå’Œæµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆç®€åŒ–æµ‹è¯•è„šæœ¬ä¸­åˆ†å±‚æ•°æ®å¤„ç†è¿‡ç¨‹æ‰€åšçš„å°è¯•ã€‚æˆ‘ä»¬åœ¨å…¶è®¾è®¡å’ŒåŠŸèƒ½ä¸ŠæŠ•å…¥äº†å¤§é‡çš„æ€è€ƒï¼Œä½†ä¹Ÿæ·±çŸ¥è¿˜æœ‰å¾ˆå¤šéœ€è¦å­¦ä¹ å’Œæ”¹è¿›çš„åœ°æ–¹ã€‚å¸Œæœ›é€šè¿‡åˆ©ç”¨å®ƒçš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œæ‚¨èƒ½æ›´å¤šåœ°ä¸“æ³¨äºå®é™…çš„æµ‹è¯•é€»è¾‘ï¼Œè€Œä¸æ˜¯è¢«å¤æ‚çš„æ•°æ®è®¿é—®å’Œç»´æŠ¤é—®é¢˜æ‰€å›°æ‰°ã€‚å¦‚æœæ‚¨å†³å®šåœ¨é¡¹ç›®ä¸­è¯•ç”¨å®ƒï¼Œæˆ‘ä»¬å¾ˆä¹æ„å¬å–æ‚¨çš„æƒ³æ³•å’Œç»éªŒã€‚è®©æˆ‘ä»¬ä¸€èµ·è®©æµ‹è¯•å·¥ä½œæµç¨‹å˜å¾—æ›´å¥½ï¼ 



## ğŸ¤ è´¡çŒ®

å¦‚æœæ‚¨æƒ³è´¡çŒ®ä»£ç ï¼Œè¯·å…ˆ fork æ­¤ä»“åº“ï¼Œç„¶åæäº¤æ‹‰å–è¯·æ±‚ã€‚æˆ‘ä»¬æ¬¢è¿å„ç§å»ºè®®å’Œæ”¹è¿›ï¼Œè®© TraceSpanTree å˜å¾—æ›´å‡ºè‰²ï¼ 